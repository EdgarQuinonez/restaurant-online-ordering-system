<form [formGroup]="deliveryInfoForm" class="delivery-info-form">
  <!-- Header Section -->
  <div class="form-header">
    <h1 class="form-title">Información de Entrega</h1>
    <p class="form-subtitle">¿Dónde y cuándo debemos entregar?</p>
  </div>

  <!-- Customer Information Section -->
  <section class="form-section">
    <h2 class="section-header">Información del Cliente</h2>

    <!-- Customer Name -->
    <div class="input-group">
      <p-iftalabel>
        <input
          pInputText
          id="customerName"
          formControlName="customerName"
          placeholder="Ingresa tu nombre completo"
          [class]="{
            'input-error':
              deliveryInfoForm.get('customerName')?.touched &&
              deliveryInfoForm.get('customerName')?.invalid,
          }"
        />
        <label for="customerName">Nombre Completo</label>
      </p-iftalabel>
      @if (
        deliveryInfoForm.get("customerName")?.touched &&
        deliveryInfoForm.get("customerName")?.hasError("required")
      ) {
        <span class="error-message">El nombre es requerido</span>
      }
      @if (
        deliveryInfoForm.get("customerName")?.touched &&
        deliveryInfoForm.get("customerName")?.hasError("minlength")
      ) {
        <span class="error-message"
          >El nombre debe tener al menos 2 caracteres</span
        >
      }
    </div>

    <!-- Customer Phone -->
    <div class="input-group">
      <p-iftalabel>
        <input
          pInputText
          id="customerPhone"
          formControlName="customerPhone"
          placeholder="Ingresa tu número de teléfono"
          [class]="{
            'input-error':
              deliveryInfoForm.get('customerPhone')?.touched &&
              deliveryInfoForm.get('customerPhone')?.invalid,
          }"
        />
        <label for="customerPhone">Teléfono</label>
      </p-iftalabel>
      @if (
        deliveryInfoForm.get("customerPhone")?.touched &&
        deliveryInfoForm.get("customerPhone")?.hasError("required")
      ) {
        <span class="error-message">El teléfono es requerido</span>
      }
      @if (
        deliveryInfoForm.get("customerPhone")?.touched &&
        deliveryInfoForm.get("customerPhone")?.hasError("pattern")
      ) {
        <span class="error-message"
          >Por favor ingresa un número de teléfono válido</span
        >
      }
    </div>

    <!-- Customer Email -->
    <div class="input-group">
      <p-iftalabel>
        <input
          pInputText
          id="customerEmail"
          formControlName="customerEmail"
          placeholder="Ingresa tu correo electrónico (opcional)"
          [class]="{
            'input-error':
              deliveryInfoForm.get('customerEmail')?.touched &&
              deliveryInfoForm.get('customerEmail')?.invalid,
          }"
        />
        <label for="customerEmail">Correo Electrónico</label>
      </p-iftalabel>
      @if (
        deliveryInfoForm.get("customerEmail")?.touched &&
        deliveryInfoForm.get("customerEmail")?.hasError("email")
      ) {
        <span class="error-message"
          >Por favor ingresa un correo electrónico válido</span
        >
      }
    </div>
  </section>

  <!-- Delivery Address Section -->
  <section class="form-section">
    <h2 class="section-header">Dirección de Entrega</h2>

    <!-- Address Line 1 -->
    <div class="input-group">
      <p-iftalabel>
        <input
          pInputText
          id="addressLine1"
          formControlName="addressLine1"
          placeholder="Calle, Avenida, Boulevard, etc."
          [class]="{
            'input-error':
              deliveryInfoForm.get('addressLine1')?.touched &&
              deliveryInfoForm.get('addressLine1')?.invalid,
          }"
        />
        <label for="addressLine1">Calle</label>
      </p-iftalabel>
      @if (
        deliveryInfoForm.get("addressLine1")?.touched &&
        deliveryInfoForm.get("addressLine1")?.hasError("required")
      ) {
        <span class="error-message">La dirección principal es requerida</span>
      }
      @if (
        deliveryInfoForm.get("addressLine1")?.touched &&
        deliveryInfoForm.get("addressLine1")?.hasError("minlength")
      ) {
        <span class="error-message"
          >La dirección debe tener al menos 5 caracteres</span
        >
      }
    </div>

    <!-- Address Line 2 -->
    <div class="input-group">
      <p-iftalabel>
        <input
          pInputText
          id="addressLine2"
          formControlName="addressLine2"
          placeholder="Colonia, Sector, etc."
        />
        <label for="addressLine2">Colonia</label>
      </p-iftalabel>
    </div>

    <!-- Number Fields -->
    <div class="number-fields">
      <!-- Exterior Number -->
      <div class="input-group">
        <p-iftalabel>
          <input
            pInputText
            id="noExterior"
            formControlName="noExterior"
            placeholder="Número exterior"
            [class]="{
              'input-error':
                deliveryInfoForm.get('noExterior')?.touched &&
                deliveryInfoForm.get('noExterior')?.invalid,
            }"
          />
          <label for="noExterior">Número Exterior</label>
        </p-iftalabel>
        @if (
          deliveryInfoForm.get("noExterior")?.touched &&
          deliveryInfoForm.get("noExterior")?.hasError("required")
        ) {
          <span class="error-message">El número exterior es requerido</span>
        }
      </div>

      <!-- Interior Number -->
      <div class="input-group">
        <p-iftalabel>
          <input
            pInputText
            id="noInterior"
            formControlName="noInterior"
            placeholder="Número interior (opcional)"
          />
          <label for="noInterior">Número Interior</label>
        </p-iftalabel>
      </div>
    </div>
  </section>

  <!-- Special Instructions -->
  <section class="form-section">
    <h2 class="section-header">Instrucciones Especiales</h2>
    <div class="input-group">
      <p-iftalabel>
        <textarea
          pInputText
          id="specialInstructions"
          formControlName="specialInstructions"
          placeholder="Ej. Dejar en la puerta, Tocar timbre, etc."
          rows="3"
          class="instructions-textarea"
        ></textarea>
        <label for="specialInstructions">Instrucciones Especiales</label>
      </p-iftalabel>
    </div>
  </section>

  <!-- Action Buttons -->
  <div class="action-buttons">
    <p-button
      label="Continuar al Resumen del Pedido"
      (onClick)="onContinue()"
      [disabled]="!deliveryInfoForm.valid"
      styleClass="btn-primary"
      [class]="{ 'btn-disabled': !deliveryInfoForm.valid }"
    />
  </div>
</form>
